<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rotanava.boot.system.module.dao.SysServiceSettingMapper">
    <resultMap id="BaseResultMap" type="com.rotanava.boot.system.api.module.system.bo.SysServiceSetting">
        <!--@mbg.generated-->
        <!--@Table sys_service_setting-->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="sys_service_code" jdbcType="VARCHAR" property="sysServiceCode"/>
        <result column="sys_service_name" jdbcType="VARCHAR" property="sysServiceName"/>
        <result column="sys_service_type" jdbcType="INTEGER" property="sysServiceType"/>
        <result column="sys_service_value" jdbcType="VARCHAR" property="sysServiceValue"/>
        <result column="sys_service_default_value" jdbcType="VARCHAR" property="sysServiceDefaultValue"/>
        <result column="sys_service_description" jdbcType="VARCHAR" property="sysServiceDescription"/>
        <result column="update_by" jdbcType="INTEGER" property="updateBy"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--@mbg.generated-->
        id, sys_service_code, sys_service_name, sys_service_type, sys_service_value, sys_service_default_value,
        sys_service_description, update_by, update_time
    </sql>

    <!--auto generated by MybatisCodeHelper on 2021-03-20-->
    <select id="findBySysServiceName" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_service_setting
        where sys_service_name = #{sysServiceName,jdbcType=VARCHAR}
    </select>

    <!--auto generated by MybatisCodeHelper on 2021-03-23-->
    <select id="findBySysServiceType" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_service_setting
        where sys_service_type = #{sysServiceType,jdbcType=INTEGER}
    </select>

    <!--auto generated by MybatisCodeHelper on 2021-03-23-->
    <update id="updateManageSecurityByMap">
        UPDATE `sys_service_setting`
        SET sys_service_value = CASE sys_service_code
                WHEN 'account_pass_out_mins' THEN
                        #{map.account_pass_out_mins}
                WHEN 'account_pass_out_on' THEN
                        #{map.account_pass_out_on}
                WHEN 'account_lockout_strategy_on' THEN
                        #{map.account_lockout_strategy_on}
                WHEN 'account_lockout_strategy_frequency' THEN
                        #{map.account_lockout_strategy_frequency}
                WHEN 'account_lockout_strategy_mins' THEN
                        #{map.account_lockout_strategy_mins}
                WHEN 'password_strength' THEN
                        #{map.password_strength}
                WHEN 'admin_login_ip_filtering_on' THEN
                        #{map.admin_login_ip_filtering_on}
                WHEN 'admin_login_ip_filtering' THEN
                        #{map.admin_login_ip_filtering}
                WHEN 'member_login_ip_filtering_on' THEN
                        #{map.member_login_ip_filtering_on}
                WHEN 'member_login_ip_filtering' THEN
                        #{map.member_login_ip_filtering}
                WHEN 'last_login_info_prompt_on' THEN
                        #{map.last_login_info_prompt_on}
                WHEN 'single_sign_on' THEN
                        #{map.single_sign_on}
                WHEN 'pass_mandatory_modification_on' THEN
                        #{map.pass_mandatory_modification_on}
                WHEN 'single_login_valid_time' THEN
                        #{map.single_login_valid_time}
                END

                WHERE sys_service_code IN
        <foreach item="item" index="index" collection="map.keys"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>

    <!--auto generated by MybatisCodeHelper on 2021-03-23-->
    <update id="updateLdapByMap">
        UPDATE `sys_service_setting`
        SET sys_service_value = CASE sys_service_code
                WHEN 'ldap_address' THEN
                        #{map.ldap_address}
                WHEN 'ldap_bind_dn' THEN
                        #{map.ldap_bind_dn}
                WHEN 'ldap_password' THEN
                        #{map.ldap_password}
                WHEN 'ldap_user_ou' THEN
                        #{map.ldap_user_ou}
                WHEN 'ldap_user_filter' THEN
                        #{map.ldap_user_filter}
                WHEN 'ldap_attribute_mapping' THEN
                        #{map.ldap_attribute_mapping}
                WHEN 'ldap_enable_auth' THEN
                        #{map.ldap_enable_auth}
                END

                WHERE sys_service_code IN
        <foreach item="item" index="index" collection="map.keys"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>

    <!--auto generated by MybatisCodeHelper on 2021-05-31-->
    <select id="findSysServiceValueBySysServiceCode" resultType="java.lang.String">
        select sys_service_value
        from sys_service_setting
        where sys_service_code = #{sysServiceCode,jdbcType=VARCHAR}
    </select>

    <delete id="deleteByServiceCode">
        delete from sys_service_setting
        where sys_service_code=#{sysServiceCode,jdbcType=INTEGER}
    </delete>

    <select id="findBySysServiceCode" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_service_setting
        where sys_service_code = #{sysServiceCode,jdbcType=VARCHAR}
    </select>
</mapper>