<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rotanava.boot.system.module.dao.SysTableFieldMapper">
  <resultMap id="BaseResultMap" type="com.rotanava.boot.system.api.module.system.bo.SysTableField">
    <!--@mbg.generated-->
    <!--@Table sys_table_field-->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="field_name" jdbcType="VARCHAR" property="fieldName" />
    <result column="field_code" jdbcType="VARCHAR" property="fieldCode" />
    <result column="fixed" jdbcType="INTEGER" property="fixed" />
    <result column="width" jdbcType="INTEGER" property="width" />
    <result column="align" jdbcType="INTEGER" property="align" />
    <result column="scoped_slots" jdbcType="INTEGER" property="scopedSlots" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="table_config_id" jdbcType="INTEGER" property="tableConfigId" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    id, field_name, field_code, fixed, width, align, scoped_slots, create_time, table_config_id
  </sql>


<!--auto generated by MybatisCodeHelper on 2021-06-26-->
  <select id="findByTableConfigIdIn" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from sys_table_field
    where table_config_id in
    <foreach item="item" index="index" collection="tableConfigIdCollection"
             open="(" separator="," close=")">
      #{item,jdbcType=INTEGER}
    </foreach>
  </select>

<!--auto generated by MybatisCodeHelper on 2021-06-26-->
  <select id="findByTableConfigId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from sys_table_field
    where table_config_id=#{tableConfigId,jdbcType=INTEGER}
  </select>

<!--auto generated by MybatisCodeHelper on 2021-06-28-->
  <update id="updateByIdAndTableConfigId">
        update sys_table_field
        <set>
            <if test="updated.fieldName != null">
                field_name = #{updated.fieldName,jdbcType=VARCHAR},
            </if>
            <if test="updated.fieldCode != null">
                field_code = #{updated.fieldCode,jdbcType=VARCHAR},
            </if>
            <if test="updated.fixed != null">
                fixed = #{updated.fixed,jdbcType=INTEGER},
            </if>
            <if test="updated.width != null">
                width = #{updated.width,jdbcType=INTEGER},
            </if>
            <if test="updated.align != null">
                align = #{updated.align,jdbcType=INTEGER},
            </if>
            <if test="updated.scopedSlots != null">
                scoped_slots = #{updated.scopedSlots,jdbcType=INTEGER},
            </if>
            <if test="updated.createTime != null">
                create_time = #{updated.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updated.tableConfigId != null">
                table_config_id = #{updated.tableConfigId,jdbcType=INTEGER},
            </if>
        </set>
        where id=#{id,jdbcType=INTEGER} and table_config_id=#{tableConfigId,jdbcType=INTEGER}
    </update>

<!--auto generated by MybatisCodeHelper on 2021-07-05-->
  <insert id="insertListOrUpdate">
        INSERT INTO sys_table_field(
        id,
        field_name,
        field_code,
        fixed,
        width,
        align,
        scoped_slots,
        create_time,
        table_config_id
        )VALUES
        <foreach collection="list" item="element" index="index" separator=",">
            (
            #{element.id,jdbcType=INTEGER},
            #{element.fieldName,jdbcType=VARCHAR},
            #{element.fieldCode,jdbcType=VARCHAR},
            #{element.fixed,jdbcType=INTEGER},
            #{element.width,jdbcType=INTEGER},
            #{element.align,jdbcType=INTEGER},
            #{element.scopedSlots,jdbcType=INTEGER},
            #{element.createTime,jdbcType=TIMESTAMP},
            #{element.tableConfigId,jdbcType=INTEGER}
            )
        </foreach>
      ON DUPLICATE KEY UPDATE
      field_name=VALUES(sys_table_field.field_name),
      fixed=VALUES(sys_table_field.fixed),
      fixed=VALUES(sys_table_field.fixed),
      width=VALUES(sys_table_field.width),
      align=VALUES(sys_table_field.align),
      scoped_slots=VALUES(sys_table_field.scoped_slots),
      field_code=VALUES(sys_table_field.field_code)

    </insert>
</mapper>