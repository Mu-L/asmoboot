<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rotanava.boot.system.module.dao.SysOnlineUserMapper">
    <sql id="Base_Column_List">
        id,
        user_login_info_id,
        sys_user_token,
        login_user_id
    </sql>
    <resultMap id="BaseResultMap" type="com.rotanava.boot.system.api.module.system.bo.SysOnlineUser">
        <result column="id" property="id"/>
        <result column="user_login_info_id" property="userLoginInfoId"/>
        <result column="sys_user_token" property="sysUserToken"/>
        <result column="login_user_id" property="loginUserId"/>
    </resultMap>

    <!--auto generated by MybatisCodeHelper on 2021-03-16-->
    <delete id="deleteBySysUserTokenInNot">
        delete
        from sys_online_user
        <if test="sysUserTokenCollection != null and sysUserTokenCollection.size() != 0">
            where not sys_user_token in
            <foreach item="item" index="index" collection="sysUserTokenCollection"
                     open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </delete>

    <select id="findSysUserTokenBySysUserTokenInNot"
            resultType="com.rotanava.boot.system.api.module.system.bo.SysOnlineUser">
        select
        <include refid="Base_Column_List"/>
        from sys_online_user
        <if test="sysUserTokenCollection != null and sysUserTokenCollection.size() != 0">
            where not sys_user_token in
            <foreach item="item" index="index" collection="sysUserTokenCollection"
                     open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </select>

    <!--auto generated by MybatisCodeHelper on 2021-03-24-->
    <select id="findSysUserTokenBySysUserTokenNot" resultType="java.lang.String">
        select sys_user_token
        from sys_online_user
        where sys_user_token <![CDATA[<>]]> #{notSysUserToken}
    </select>

    <!--auto generated by MybatisCodeHelper on 2021-03-24-->
    <select id="findBySysUserToken" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_online_user
        where sys_user_token = #{sysUserToken}
    </select>

    <!--auto generated by MybatisCodeHelper on 2021-03-24-->
    <delete id="deleteBySysUserToken">
        delete
        from sys_online_user
        where sys_user_token = #{sysUserToken}
    </delete>

<!--auto generated by MybatisCodeHelper on 2021-05-10-->
    <select id="findByUserAccountName" resultMap="BaseResultMap">
        select sys_online_user.id, sys_online_user.user_login_info_id, sys_online_user.sys_user_token, sys_online_user.login_user_id
        from sys_online_user JOIN sys_user ON sys_user.id = sys_online_user.login_user_id
        where sys_user.user_account_name = #{userAccountName}
    </select>
</mapper>
